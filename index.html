<script>
const noBtn = document.getElementById("noBtn");
const yesBtn = document.getElementById("yesBtn");
const message = document.getElementById("message");
const music = document.getElementById("bgMusic");

let noScale = 1;
let yesScale = 1;

// Start music once
document.body.addEventListener("click", () => {
    if (music.paused) music.play().catch(()=>{});
}, { once: true });

// Shrink No + Grow Yes
function punishNo() {
    noScale = Math.max(0.3, noScale - 0.1);
    yesScale += 0.1;

    noBtn.style.transform = `scale(${noScale})`;
    yesBtn.style.transform = `scale(${yesScale})`;
}

// Move No button randomly (always inside viewport)
function moveNoRandom() {
    const btnWidth = noBtn.offsetWidth;
    const btnHeight = noBtn.offsetHeight;

    const maxX = window.innerWidth - btnWidth - 20;
    const maxY = window.innerHeight - btnHeight - 20;

    const randomX = Math.random() * maxX;
    const randomY = Math.random() * maxY;

    noBtn.style.position = "fixed";
    noBtn.style.left = randomX + "px";
    noBtn.style.top = randomY + "px";
}

// DESKTOP: trigger when mouse gets near button
document.addEventListener("mousemove", (e) => {
    const rect = noBtn.getBoundingClientRect();

    const distanceX = e.clientX - (rect.left + rect.width / 2);
    const distanceY = e.clientY - (rect.top + rect.height / 2);

    const distance = Math.sqrt(distanceX * distanceX + distanceY * distanceY);

    if (distance < 100) {
        moveNoRandom();
        punishNo();
    }
});

// MOBILE: dodge on touch
noBtn.addEventListener("touchstart", (e) => {
    e.preventDefault();
    moveNoRandom();
    punishNo();
});

// YES CLICK
yesBtn.addEventListener("click", () => {
    message.innerHTML =
        "You finally got that right! Congratulations on a lifetime deal for awesomeness ❤️";

    yesBtn.style.display = "none";
    noBtn.style.display = "none";

    confetti({
        particleCount: 300,
        spread: 120,
        origin: { y: 0.6 }
    });
});

// Floating hearts
function createHeart() {
    const heart = document.createElement("div");
    heart.classList.add("heart");
    heart.innerHTML = "❤️";
    heart.style.left = Math.random() * 100 + "vw";
    heart.style.fontSize = (Math.random() * 20 + 15) + "px";
    document.body.appendChild(heart);

    setTimeout(() => heart.remove(), 5000);
}

setInterval(createHeart, 400);
</script>
